(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(2946)}])},2946:function(e,t,n){"use strict";n.r(t);var s=n(5893),a=n(1664),r=n.n(a),o=n(7294),l=n(7870),i=n(1163),c=n(3454);t.default=()=>{let[e]=(0,o.useState)(""),t=(0,l.WX)(e=>e.auth.setToken),[n,a]=(0,o.useState)(""),[d,h]=(0,o.useState)(""),u=(0,l.WX)(e=>e.cart.setCart),m=(0,i.useRouter)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Login"}),(0,s.jsx)("hr",{}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),fetch("".concat(void 0!==c?c:({}).API_ENDPOINT,"login/"),{method:"POST",body:JSON.stringify({username:n,password:d}),headers:{"Content-type":"application/json;charset=UTF-8"}}).then(e=>e.json()).then(e=>{void 0!==e.token&&null!==e.token&&(t(e.token),fetch("".concat(void 0!==c?c:({}).API_ENDPOINT,"get-cart/"),{method:"GET",headers:{Authorization:"Token ".concat(e.token)}}).then(e=>e.json()).then(e=>{let t=e.map(e=>e.product);e.forEach((e,n)=>{t[n].quantity=e.quantity}),u(t)}),m.push("/products"))})},children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email address"}),(0,s.jsx)("input",{placeholder:"Email",onChange:e=>a(e.target.value),type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp"})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,s.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",onChange:e=>h(e.target.value)})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Log In"})]}),(0,s.jsx)("br",{}),(0,s.jsx)(r(),{href:"signup",children:(0,s.jsx)("a",{children:"Or Sign Up"})}),(0,s.jsx)("div",{className:"text-danger",children:e})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);